.grow-wrap {
    display: grid;
    position: relative;
    width: 100%;

    .raw-input {
        margin: 0;
        outline: 0;
        border: 1px solid blue;
        border: 0;
        background-color: transparent;
        padding: 0;
        width: 100%;
        overflow: hidden;
        resize: none;
        color: inherit;
        font-family: inherit;
        font-size: inherit;
    }

    &:not(.compact) {
        &::after {
            visibility: hidden;
            white-space: pre-wrap;
            font: inherit;
            content: attr(data-replicated-value) " ";
            grid-area: 1 / 1 / 2 / 2;
        }

        .raw-input {
            font: inherit;
            grid-area: 1 / 1 / 2 / 2;
        }
    }

    &.compact {
        &:not(:focus-within) {
            &::after {
                position: absolute;
                width: 100%;
                height: 100%;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
                font: inherit;
                content: attr(data-short-value) " ";
                grid-area: 1 / 1 / 2 / 2;
            }

            .raw-input {
                /* We should not hide raw input if empty to show placeholder */
                &:not(.empty) {
                    /* We are use visibility: hidden because element needs to
                     * be focused on tab press */
                    opacity: 0;
                }
            }
        }

        &:focus-within {
            &::after {
                visibility: hidden;
                white-space: pre-wrap;
                font: inherit;
                content: attr(data-replicated-value) " ";
                grid-area: 1 / 1 / 2 / 2;
            }

            .raw-input {
                font: inherit;
                grid-area: 1 / 1 / 2 / 2;
            }
        }
    }
}
